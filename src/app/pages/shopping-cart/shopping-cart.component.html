<div class="container my-5">
  <h2 class="text-center fw-bold text-warning mb-4">ğŸ›’ Carrinho de Compras</h2>

  <!-- Carrinho vazio -->
  <ng-container *ngIf="(cartItems$ | async)?.length === 0; else filledCart">
    <div class="alert alert-secondary text-center shadow-sm">
      Seu carrinho estÃ¡ vazio ğŸ˜•
      <a routerLink="/" class="btn btn-outline-warning btn-sm ms-2">Voltar Ã s compras</a>
    </div>
  </ng-container>

  <!-- Carrinho cheio -->
  <ng-template #filledCart>
    <div class="table-responsive shadow-sm rounded">
      <table class="table align-middle">
        <thead class="table-dark text-center">
          <tr>
            <th>Imagem</th>
            <th>Produto</th>
            <th>PreÃ§o</th>
            <th>Quantidade</th>
            <th>Subtotal</th>
            <th>AÃ§Ãµes</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of cartItems$ | async; trackBy: trackByProduct" class="text-center">
            <td><img [src]="item.product.image" [alt]="item.product.title" width="70" class="img-thumbnail" /></td>
            <td class="text-start">{{ item.product.title }}</td>
            <td>{{ item.product.price | currency:'BRL' }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.product.price * item.quantity | currency:'BRL' }}</td>
            <td>
              <button class="btn btn-sm btn-outline-danger" (click)="removeItem(item.product.id)">Remover</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Total e aÃ§Ãµes -->
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-center mt-4 gap-3">
      <h4 class="fw-bold">
        Total:
        <span class="text-success">{{ total$ | async | currency:'BRL' }}</span>
      </h4>

      <div class="d-flex gap-2">
        <button class="btn btn-outline-danger" (click)="clearCart()">ğŸ—‘ï¸ Limpar Carrinho</button>
        <a routerLink="/checkout" class="btn btn-success">ğŸ’³ Finalizar Compra</a>
      </div>
    </div>
  </ng-template>
</div>
